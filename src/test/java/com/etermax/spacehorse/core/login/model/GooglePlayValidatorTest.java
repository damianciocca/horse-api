package com.etermax.spacehorse.core.login.model;

import com.etermax.spacehorse.core.error.InvalidTokenException;
import org.junit.Before;
import org.junit.Test;

public class GooglePlayValidatorTest {

	// TODO: Add test with valid token
	private static final String INVALID_TOKEN = "eyJhbGciOiJSUzI1NiIsImtpZCI6IjI1MTA3MjBjZDUyNDJiMzI4MTdiZDhjMjFkNTM3Mzg4ZWE5MGE1Y2UifQ.eyJhenAiOiI2NzQ2NzgxMTE5Mi0ydTg1OGd0a2ZtMmw0bGlhZmZqcGowcnFtMnFwZm1rdC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsImF1ZCI6IjY3NDY3ODExMTkyLXN1bWtwbHVhdXIzMG44bm50aGxyYThjbW1tYWcwYnRtLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwic3ViIjoiMTExMDk3NzI3Njc2MTI1NjUzMTMxIiwiaXNzIjoiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tIiwiaWF0IjoxNTAwNDkyODMzLCJleHAiOjE1MDA0OTY0MzMsInBpY3R1cmUiOiJodHRwczovL2xoNS5nb29nbGV1c2VyY29udGVudC5jb20vLVRfTGUtaURKdXAwL0FBQUFBQUFBQUFJL0FBQUFBQUFBQUFzL3VCZGl2aml3YXdJL3M5Ni1jL3Bob3RvLmpwZyJ9.jHpTfEMF5ewo568jQSG3L6FINxalfO8hyOjUiMrbUHSR3oPzLX7oO93Fes_4IeinkRpyGATNmjFPKX--Yu7mdVY7RyRf-Cpr5-I7U_EPu_GSQXXqtMFR-SG_pLMVXkAfLfmCKvhaaTfRz_Y8f3duhx7M5puWYaFj9toZ4tAx8pEyqh85esq2-1e2mIH44hlRqn-sY34RiHFOtVUDSkNtIp52I9ZFrom5lMc1DN3fagvoHuTgQMpKaKRUYQl4Ahx_9RupETJbXfZCroSts91lHFWdM7KrTdBrB-4duvGKYkF7v6kVaBZo62ABLOwcIKpt7e8od_NrjjpgNHdTpK0SPQ";

	private static final String VALID_TOKEN =   "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijc2ZjYxNGZmNTgyMzE1MDFmNjUxZTUwNzNlOTliMDg3YTI3MTI0MjQifQ.eyJhenAiOiIxMzY0Nzg1NTYzNDktcWxqZzhqOW82b2h2OTVsdm41Z3UyNjNvYTlrZjJ1ZjEuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiIxMzY0Nzg1NTYzNDktbDJ2YzNmZTk5cnVwdDhoYWE0aG5xZm8ybnJvNDhsNDAuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDg3NDMwNzM5OTIyNzI4OTE1NDAiLCJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJpYXQiOjE1MDQwMjg4MzcsImV4cCI6MTUwNDAzMjQzNywibmFtZSI6IlFBIENvbXByYXMiLCJnaXZlbl9uYW1lIjoiUUEiLCJmYW1pbHlfbmFtZSI6IkNvbXByYXMifQ.TaR7lQw4yplbVLl1z6GqKLbuEipTgrpN0Hhjxtz3WRsT4aCdv3NA8Gwz5ofV_BYoOoy4FltLHdtNjzUrtwu4RUNz81aH5ONKq1pjftBJqzyGalsxaeB_EYhdN0aVWME8ZxA18PLKJ6P4e7OQ6j4S6Sht1z0LTdQED_nnKJmtmmN18fM1k4Q-n055EhTyGygPQeOkp6ETUAXyppCXADlrFw6ZdGTTBkE6zIiaElqVb7sqBdjdCuimwqCYsWA1vEopSVKBzVIfHUj73I0xPWfxv1vZL9kvSfvyUbJRuz3WYCUX5mGlInq0nE1tdVe-M6PlSiANZ5pnA94kqr-QssGwdw";

	private GooglePlayValidator googlePlayValidator;

	@Before
	public void setUp() {
		this.googlePlayValidator = new GooglePlayValidator();
	}

	@Test(expected = InvalidTokenException.class)
	public void testInvalidToken() {
		this.googlePlayValidator.getGPGSIdWhenTokenIsVerified(INVALID_TOKEN);
	}

    /*
	@Test
	public void testValidToken() {
	    // Esto no se puede probar porque Google invalida cada tanto los certificados publicos
		this.googlePlayValidator.getGPGSIdWhenTokenIsVerified(VALID_TOKEN, 9999999999999L);
	}
	*/

}
